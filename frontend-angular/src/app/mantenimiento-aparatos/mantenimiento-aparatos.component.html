
  <!-- mantenimiento-aparatos.component.html -->

  <div [formGroup]="parentForm" class="form-aparatos-box">
    <h3>ğŸ‹ï¸â€â™‚ï¸ Reportar Falla en Aparato</h3>
  
    <!-- Buscador con Autocompletado -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>ğŸ” Escribe el cÃ³digo o nombre...</mat-label>
      <input
        type="text"
        matInput
        [formControl]="filtroControl"
        [matAutocomplete]="auto"
        [ngClass]="{ resaltado: inputResaltado }"
        (animationend)="inputResaltado = false"
      />
      <mat-autocomplete
        #auto="matAutocomplete"
        (optionSelected)="seleccionarAparato($event.option.value)"
      >
        <mat-option
          *ngFor="let ap of aparatosFiltrados$ | async"
          [value]="ap"
        >
          <div class="opcion-aparato">
            <span class="emoji-aparato">
              {{ obtenerEmoji(ap.descripcion) }}
            </span>
            <div class="detalles-aparato">
              <span class="codigo-aparato">{{ ap.codigo }}</span>
              <span class="descripcion-aparato">{{ ap.descripcion }}</span>
              <small class="marca-aparato">({{ ap.marca }})</small>
            </div>
          </div>
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  
    <!-- Problema detectado -->
    <div class="form-group-grouped">
      <label for="problema_detectado">ğŸ›  Problema detectado:</label>
      <input
        type="text"
        id="problema_detectado"
        formControlName="problema_detectado"
        placeholder="Describe el problema..."
      />
    </div>
  
    <!-- Â¿Requiere refacciÃ³n? -->
    <div class="form-group-grouped">
      <label>
        <input type="checkbox" formControlName="necesita_refaccion" />
        Â¿Requiere refacciÃ³n?
      </label>
    </div>
  
    <!-- DescripciÃ³n tÃ©cnica de la refacciÃ³n -->
    <div class="form-group-grouped" *ngIf="parentForm.get('necesita_refaccion')?.value">
      <label for="descripcion_refaccion">ğŸ§° DescripciÃ³n tÃ©cnica de la refacciÃ³n:</label>
      <textarea
        id="descripcion_refaccion"
        formControlName="descripcion_refaccion"
        placeholder="Especifica el componente o detalle tÃ©cnico..."
        rows="3"
        class="textarea-refaccion"
      ></textarea>
    </div>

   <!-- ğŸ”¥ Criticidad -->
  <div class="form-group-grouped">
    <label for="criticidad">ğŸ”¥ Nivel de criticidad:</label>
    <select id="criticidad" formControlName="criticidad">
      <option *ngFor="let nivel of [1, 2, 3, 4, 5]" [value]="nivel">
        Nivel {{ nivel }}
      </option>
    </select>
  </div>
  </div>
  
  