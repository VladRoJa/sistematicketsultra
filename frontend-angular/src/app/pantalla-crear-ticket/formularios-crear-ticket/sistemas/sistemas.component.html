<!-- frontend-angular/src/app/formularios-crear-ticket/sistemas/sistemas.component.html -->

<div class="subformulario-box" [formGroup]="parentForm">

  <!-- Sucursal (solo admins) -->
  <mat-form-field *ngIf="esAdmin" appearance="fill">
    <mat-label>Selecciona sucursal</mat-label>
    <mat-select formControlName="sucursal_id">
      <mat-option *ngFor="let suc of sucursales" [value]="suc.sucursal_id">{{ suc.sucursal }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- CategorÃ­a (dinÃ¡mica por inventario) -->
  <mat-form-field appearance="fill">
    <mat-label>ğŸ“ CategorÃ­a</mat-label>
    <mat-select formControlName="categoria">
      <mat-option value="">Seleccione categorÃ­a</mat-option>
      <mat-option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Selector de equipo filtrado -->
    <app-selector-equipo
      [equipos]="equiposFiltrados"
      [required]="true"
      (equipoSeleccionado)="onEquipoSeleccionado($event)">
    </app-selector-equipo>

  <!-- SubcategorÃ­a (listado fijo) -->
  <mat-form-field appearance="fill">
    <mat-label>ğŸ“‚ SubcategorÃ­a</mat-label>
    <mat-select formControlName="subcategoria">
      <mat-option value="">Seleccione subcategorÃ­a</mat-option>
      <mat-option *ngFor="let sub of subcategoriasDisponibles" [value]="sub">{{ sub }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- DescripciÃ³n -->
  <mat-form-field appearance="fill">
    <mat-label>ğŸ“‹ DescripciÃ³n del problema</mat-label>
    <textarea matInput formControlName="descripcion" rows="4"></textarea>
  </mat-form-field>

</div>
