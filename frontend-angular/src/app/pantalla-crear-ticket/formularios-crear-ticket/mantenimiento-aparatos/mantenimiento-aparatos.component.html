  <!-- frontend-angular\src\app\pantalla-crear-ticket\formularios-crear-ticket\mantenimiento-aparatos\mantenimiento-aparatos.component.html -->


<div class="subformulario-box">

  <!-- Selecciona sucursal solo si eres admin -->
  <mat-form-field *ngIf="esAdmin" appearance="fill" class="full-width">
    <mat-label>Selecciona sucursal</mat-label>
    <mat-select [(ngModel)]="sucursalSeleccionada" (selectionChange)="onSucursalChange($event.value)">
      <mat-option *ngFor="let suc of sucursales" [value]="suc.sucursal_id">
        {{ suc.sucursal }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <h3>Reportar Falla en {{ nombreTipo }}</h3>

  <!-- Selector reutilizable para equipos -->
  <app-selector-equipo
    [sucursalId]="sucursalSeleccionada"
    tipo="aparato"
    [equipos]="equipos"
    placeholder="Buscar {{ nombreTipo.toLowerCase() }}..."
    [mostrarEmoji]="true"
    (equipoSeleccionado)="onEquipoSeleccionado($event)">
  </app-selector-equipo>

  <!-- Descripción del problema -->
  <mat-form-field *ngIf="parentForm.get('descripcion_aparato')" appearance="fill" class="form-group-description">
    <mat-label>📋 Descripción del problemaaaaa</mat-label>
    <textarea
      matInput
      [formControl]="parentForm.get('descripcion_aparato')"
      class="descripcion-textarea"
      rows="4"
      placeholder="Detalla lo ocurrido con claridad..."></textarea>
  </mat-form-field>

  <!-- ¿Requiere refacción? -->
  <div class="form-group horizontal-align" *ngIf="parentForm.get('necesita_refaccion')">
    <input type="checkbox" [formControl]="parentForm.get('necesita_refaccion')" />
    <label>¿Requiere refacción?</label>
  </div>

  <!-- Descripción técnica de la refacción -->
  <mat-form-field *ngIf="parentForm.get('descripcion_refaccion') && parentForm.get('necesita_refaccion')?.value" appearance="fill" class="full-width">
    <mat-label>🧰 Descripción técnica de la refacción</mat-label>
    <textarea
      matInput
      [formControl]="parentForm.get('descripcion_refaccion')"
      placeholder="Detalle técnico..."
      rows="3"></textarea>
  </mat-form-field>
</div>
