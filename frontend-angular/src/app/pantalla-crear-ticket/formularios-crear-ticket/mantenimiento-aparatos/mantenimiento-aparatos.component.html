  <!-- frontend-angular\src\app\pantalla-crear-ticket\formularios-crear-ticket\mantenimiento-aparatos\mantenimiento-aparatos.component.html -->


<div class="subformulario-box">

  <!-- Selecciona sucursal solo si eres admin -->
  <mat-form-field *ngIf="esAdmin" appearance="fill" class="full-width">
    <mat-label>Selecciona sucursal</mat-label>
    <mat-select [(ngModel)]="sucursalSeleccionada" (selectionChange)="onSucursalChange($event.value)">
      <mat-option *ngFor="let suc of sucursales" [value]="suc.sucursal_id">
        {{ suc.sucursal }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <h3>ğŸ‹ï¸â€â™‚ï¸ Reportar Falla en Aparato</h3>

  <!-- Selector reutilizable para equipos -->
  <app-selector-equipo
    [sucursalId]="sucursalSeleccionada"
    tipo="aparato"
    placeholder="Buscar aparato..."
    [mostrarEmoji]="true"
    (equipoSeleccionado)="onEquipoSeleccionado($event)">
  </app-selector-equipo>

  <!-- Detalle -->
  <mat-form-field *ngIf="parentForm.get('detalle')" appearance="fill" class="full-width">
    <mat-label>Detalle del aparato</mat-label>
    <input matInput [formControl]="parentForm.get('detalle')" placeholder="Detalle del aparato" />
  </mat-form-field>

  <!-- DescripciÃ³n del problema -->
  <mat-form-field *ngIf="parentForm.get('descripcion')" appearance="fill" class="form-group-description">
    <mat-label>ğŸ“‹ DescripciÃ³n del problema</mat-label>
    <textarea
      matInput
      [formControl]="parentForm.get('descripcion')"
      class="descripcion-textarea"
      rows="4"
      placeholder="Detalla lo ocurrido con claridad..."></textarea>
  </mat-form-field>

  <!-- Â¿Requiere refacciÃ³n? -->
  <div class="form-group horizontal-align" *ngIf="parentForm.get('necesita_refaccion')">
    <input type="checkbox" [formControl]="parentForm.get('necesita_refaccion')" />
    <label>Â¿Requiere refacciÃ³n?</label>
  </div>

  <!-- DescripciÃ³n tÃ©cnica de la refacciÃ³n -->
  <mat-form-field *ngIf="parentForm.get('descripcion_refaccion') && parentForm.get('necesita_refaccion')?.value" appearance="fill" class="full-width">
    <mat-label>ğŸ§° DescripciÃ³n tÃ©cnica de la refacciÃ³n</mat-label>
    <textarea
      matInput
      [formControl]="parentForm.get('descripcion_refaccion')"
      placeholder="Detalle tÃ©cnico..."
      rows="3"></textarea>
  </mat-form-field>
</div>
