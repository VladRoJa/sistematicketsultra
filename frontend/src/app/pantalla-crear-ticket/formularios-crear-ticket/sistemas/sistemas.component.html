<!-- frontend-angular/src/app/formularios-crear-ticket/sistemas/sistemas.component.html -->

<div class="subformulario-box" [formGroup]="parentForm">

  <!-- Loader -->
  <div *ngIf="categorias.length === 0" class="loader" style="margin: 20px auto;"></div>

  <!-- Contenido -->
  <ng-container *ngIf="categorias.length > 0">

    <!-- ğŸ”’ Oculta todo este bloque cuando ocultarPickers=true -->
    <ng-container *ngIf="!ocultarPickers">
      <!-- CategorÃ­a -->
      <mat-form-field appearance="fill">
        <mat-label>ğŸ“ CategorÃ­a</mat-label>
        <mat-select formControlName="categoria">
          <mat-option value="">Seleccione categorÃ­a</mat-option>
          <mat-option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Selector de equipo -->
      <app-selector-equipo
        [equipos]="equiposFiltrados"
        [required]="!ocultarPickers" 
        (equipoSeleccionado)="onEquipoSeleccionado($event)">
      </app-selector-equipo>
    </ng-container>

    <!-- DescripciÃ³n: SIEMPRE visible -->
    <mat-form-field appearance="fill">
      <mat-label>ğŸ“‹ DescripciÃ³n del problema</mat-label>
      <textarea matInput formControlName="descripcion" rows="4"></textarea>
    </mat-form-field>

  </ng-container>
</div>
